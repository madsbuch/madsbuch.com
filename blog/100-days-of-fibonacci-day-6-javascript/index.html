<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <script>
    // I have moved the blog
    let url = 'https://blog.madsbuch.com' + window.location.pathname.replace('/blog', '')
    window.location = url
  </script>

  <title>100 Days of Fibonacci - Day 6, JavaScript</title>
  <meta name="description" content="This is an article in a series of articles. An overview of the entireproject can be found here." />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@madspbuch" />
    <meta name="twitter:title" content="100 Days of Fibonacci - Day 6, JavaScript" />
    <meta name="twitter:image" content="http://madsbuch.com/blog/assets/images/logo.png" />
    
    <meta name="twitter:description"  content="This is an article in a series of articles. An overview of the entireproject can be found here." />
    
  
  
  <meta property="og:site_name" content="Mads Buch" />
  <meta property="og:title" content="100 Days of Fibonacci - Day 6, JavaScript"/>
  
  <meta property="og:description" content="This is an article in a series of articles. An overview of the entireproject can be found here." />
  
  <meta property="og:image" content="http://madsbuch.com/blog/assets/images/logo.png" />
  <meta property="og:url" content="http://madsbuch.com/blog/100-days-of-fibonacci-day-6-javascript/" >
  <meta property="og:type" content="blog" />

  
  <meta property="fb:app_id" content="1727612590830968" />
  
  

  <meta property="article:published_time" content="2015-12-21T00:00:00+01:00">

  <link rel="canonical" href="http://madsbuch.com/blog/100-days-of-fibonacci-day-6-javascript/"/>
  <link rel="shortcut icon" href="/blog/assets/images/favicon.png" type="image/png"/>
  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/blog/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/blog/css/print.css" />
  <link rel="stylesheet" type="text/css" href="/blog/css/extra.css" />

  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3209922-9', 'auto');
  ga('send', 'pageview');

</script>
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<a href="http://madsbuch.com/blog" class="logo-readium">
    <span class="logo" style="background-image: url(/blog/assets/images/logo.png)"></span>
</a>

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">100 Days of Fibonacci - Day 6, JavaScript</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/blog/assets/images/author.png)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person"></h4>
              on
              <time datetime="2015-12-21T00:00:00+01:00">21 Dec 2015</time>
              <!-- , tagged on <span class="post-tag-">, <a href="/tag/"></a></span> -->
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <p>This is an article in a series of articles. An overview of the entire
project can be found <a href="/blog/100-days-of-fibonacci-overview/">here</a>.</p>

<p>Until now I have focused on Fibonacci as a function of some input.
I have defined a function which returns a value when supplied an argument.
This yield a batch processing paradigm. However, the Fibonacci is defined as
a series, and as such it makes sense to treat it as a series.</p>

<p>In this blog post, I am going to treat Fibonacci as an unlimited stream of
numbers. To carry out this idea, I am going to use JavaScript. The reason
for this is that JavaScript is a well-known programming language and
because their event system is easy to understand. Later I will expand
the notion to other languages where the concept is known as streams,
signals, coinductive data structures, etc.</p>

<h1 id="day-6---javascript">Day 6 - JavaScript</h1>
<p>The core JavaScript implementation is like the iterative implementation
I did <a href="/blog/100-days-of-fibonacci-day-1-c/">day 1 in C</a>.
It is expanded to directly emit an event carrying the result.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Start dispatching events</span>
<span class="kd">function</span> <span class="nx">startDispatcher</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>

    <span class="c1">//We never stop the stream</span>
    <span class="k">while</span><span class="p">(</span><span class="kc">true</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">;</span>
        <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">;</span>
        <span class="nx">a</span><span class="o">=</span><span class="nx">tmp</span>

        <span class="c1">// emit</span>
        <span class="nx">emitter</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">'fib'</span><span class="p">,</span> <span class="p">{</span><span class="s2">"fibn"</span> <span class="p">:</span> <span class="nx">a</span><span class="p">,</span> <span class="s2">"n"</span><span class="p">:</span><span class="nx">i</span><span class="p">});</span>
        <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>When this function is called it will emit a new event every time a
Fibonacci number has been calculated. But this does not work by itself. We
also need something to consume it. Following is a function that consume the
events and prints a <code class="highlighter-rouge">.</code> on the screen. When we hit <em>n = 10</em> we write the
corresponding element in the Fibonacci series.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Listen on the event</span>
<span class="nx">emitter</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"fib"</span> <span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="c1">// Only write result when n is 10</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">n</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span>
        <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">"</span><span class="err">\</span><span class="s2">n"</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">fibn</span> <span class="o">+</span> <span class="s2">"</span><span class="err">\</span><span class="s2">n"</span><span class="p">);</span>
    <span class="k">else</span>
        <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span>
<span class="p">});</span></code></pre></figure>

<p>When running the file through node we get following:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span> <span class="nx">node</span> <span class="nx">fib</span><span class="p">.</span><span class="nx">js</span> 
<span class="p">.........</span>
<span class="mi">55</span>
<span class="p">...................................................................................................</span></code></pre></figure>

<p>As usual, the code is available
<a href="https://github.com/madsbuch/snippets/blob/master/fibonacci/fib.js">here</a>.</p>

<h1 id="javascript-and-event-driven-programming">JavaScript and Event Driven Programming</h1>
<p>JavaScript was initially made as a scripting language for browsers and
has gained its popularity for programming user interfaces. With faster
processors and faster implementations of JavaScript the browser has got
more responsibility, and JavaScript has been turned into a general purpose
programming language. It has been ported to run on the server (with the
most widespread implementation as being “nodeJS”) and databases. It
is now possible to develop large distributed applications in nothing but
JavaScript, which is also done.</p>

<p>So what about the Events? When programming user interfaces the interface
usually stands still until a button is pressed or an input field is
filled. Here the subsystem fires some events whenever something meaningful
is happening. It is then possible to add functions to be called on these
events.</p>

<p>This approach has been in use for a long time. But has certain disadvantages
when working on large systems. It quickly becomes messy when too many events
are to be handled and dispatched. But certain solutions already do exists.
Later on, we will take a look at Elm, Here we model the complete application
and let the system handle what part of the web page is updated. And don’t
matter. It is fast.</p>

<h1 id="conclusion">Conclusion</h1>
<p>Í have introduced the notion of events which are going to support our
understanding of streams and signals for reactive programming later on.
This I have done in JavaScript which has turned into a general purpose
programming language primarily for full stack web development.</p>

        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=100+Days+of+Fibonacci+-+Day+6%2C+JavaScript&amp;url=http://madsbuch.com/blog/100-days-of-fibonacci-day-6-javascript"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/blog/assets/images/author.png)">Blog Logo</div>
              <h4>Mads Buch</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2015-12-21 00:00">21 Dec 2015</time></p>
            </section>
          </div>
          
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/blog/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="/">Mads Buch</a> &copy; 2019<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
        
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/blog/assets/images/cover.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Mads Buch</h1>
        <h2 class="blog-description">Technical articles
</h2>
        <a href="/blog" class="btn">Back to Overview</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/blog/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/blog/assets/js/index.js"></script>
<script type="text/javascript" src="/blog/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    
      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>


  </body>
</html>
