<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <!-- (1) Optimize for mobile versions: http://goo.gl/EOpFl -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- (1) force latest IE rendering engine: bit.ly/1c8EiC9 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <script>
    // I have moved the blog
    let url = 'https://blog.madsbuch.com' + window.location.pathname.replace('/blog', '')
    window.location = url
  </script>

  <title>100 Days of Fibonacci - Day 3, Scala</title>
  <meta name="description" content="Coming from yesterdays Java, Scala is a naturally the next step. It isa functional language compiled to run on the Java Virtual Machine.It integrates easily with Java programs, and as such, it is o..." />

  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@madspbuch" />
    <meta name="twitter:title" content="100 Days of Fibonacci - Day 3, Scala" />
    <meta name="twitter:image" content="http://madsbuch.com/blog/assets/images/logo.png" />
    
    <meta name="twitter:description"  content="Coming from yesterdays Java, Scala is a naturally the next step. It isa functional language compiled to run on the Java Virtual Machine.It integrates easily with Java programs, and as such, it is o..." />
    
  
  
  <meta property="og:site_name" content="Mads Buch" />
  <meta property="og:title" content="100 Days of Fibonacci - Day 3, Scala"/>
  
  <meta property="og:description" content="Coming from yesterdays Java, Scala is a naturally the next step. It isa functional language compiled to run on the Java Virtual Machine.It integrates easily with Java programs, and as such, it is o..." />
  
  <meta property="og:image" content="http://madsbuch.com/blog/assets/images/logo.png" />
  <meta property="og:url" content="http://madsbuch.com/blog/100-days-of-fibonacci-day-3-scala/" >
  <meta property="og:type" content="blog" />

  
  <meta property="fb:app_id" content="1727612590830968" />
  
  

  <meta property="article:published_time" content="2015-12-18T00:00:00+01:00">

  <link rel="canonical" href="http://madsbuch.com/blog/100-days-of-fibonacci-day-3-scala/"/>
  <link rel="shortcut icon" href="/blog/assets/images/favicon.png" type="image/png"/>
  <link rel="stylesheet" href="//brick.a.ssl.fastly.net/Linux+Libertine:400,400i,700,700i/Open+Sans:400,400i,700,700i">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" media="screen" href="/blog/css/main.css" />
  <link rel="stylesheet" type="text/css" media="print" href="/blog/css/print.css" />
  <link rel="stylesheet" type="text/css" href="/blog/css/extra.css" />

  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3209922-9', 'auto');
  ga('send', 'pageview');

</script>
</head>

  <body itemscope itemtype="http://schema.org/Article">
    <!-- header start -->

<a href="http://madsbuch.com/blog" class="logo-readium">
    <span class="logo" style="background-image: url(/blog/assets/images/logo.png)"></span>
</a>

<!-- header end -->

    <main class="content" role="main">
      <article class="post">
        
        <div class="noarticleimage">
          <div class="post-meta">
            <h1 class="post-title">100 Days of Fibonacci - Day 3, Scala</h1>
            <div class="cf post-meta-text">
              <div class="author-image" style="background-image: url(/blog/assets/images/author.png)">Blog Logo</div>
              <h4 class="author-name" itemprop="author" itemscope itemtype="http://schema.org/Person"></h4>
              on
              <time datetime="2015-12-18T00:00:00+01:00">18 Dec 2015</time>
              <!-- , tagged on <span class="post-tag-">, <a href="/tag/"></a></span> -->
            </div>
          </div>
        </div>
        <br>
        <br>
        <br>
        
        <section class="post-content">
          <div class="post-reading">
            <span class="post-reading-time"></span> read
          </div>
          <a name="topofpage"></a>
          <!--{ Introduction to Scala from a JAVA point of view | }-->
<p>Coming from yesterdays Java, Scala is a naturally the next step. It is
a functional language compiled to run on the Java Virtual Machine.
It integrates easily with Java programs, and as such, it is often used
in conjunction with Java. Javas API is also available in Scala. This
makes it easier for Java developers to start with Scala if they
want to dive into functional programming.</p>

<p>This is the 4th day in my little
<a href="/blog/100-days-of-fibonacci-overview/">challenge</a> I am carrying
out as a personal project. The first days elaborated on simple concepts,
but later on more complicated concepts such as type level programming, parallel
programming and even more theoretical subjects are explored.</p>

<h1 id="day-3---scala">Day 3 - Scala</h1>
<p>Today I present an implementation of Fibonacci in the Continuation Passing
Style (CPS). This can easily be done in Scala because of its functional
nature:</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="c1">// Fibonacci in Contiuation Passing Style
</span><span class="k">def</span> <span class="n">fib_cps</span> <span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">k</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span> <span class="o">=&gt;</span> <span class="kt">Int</span><span class="o">))</span> <span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">n</span> <span class="k">match</span><span class="o">{</span>
    <span class="k">case</span> <span class="mi">0</span> <span class="k">=&gt;</span> <span class="n">k</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
    <span class="k">case</span> <span class="mi">1</span> <span class="k">=&gt;</span> <span class="n">k</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
    <span class="k">case</span> <span class="k">_</span> <span class="k">=&gt;</span> <span class="n">fib_cps</span><span class="o">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span>
        <span class="n">fib_cps</span><span class="o">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="o">,</span> <span class="o">(</span><span class="n">b</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span>
            <span class="n">k</span><span class="o">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">)))</span>
<span class="o">}</span></code></pre></figure>

<p>In this example I have used pattern matching to keep
it easily readable.
The variable <em>k</em> holds the continuation which is evaluated
in the base cases (<code class="highlighter-rouge">case 0</code> and <code class="highlighter-rouge">case 1</code>).</p>

<p>The above code was wrapped to make it compatible to the
usually type signature of Fibonacci.</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="c1">// An alias to make it satisfy the type signature Int -&gt; Int
</span><span class="k">def</span> <span class="n">fib_cont</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">fib_cps</span><span class="o">(</span><span class="n">n</span><span class="o">,</span> <span class="o">((</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span><span class="o">))</span> </code></pre></figure>

<p>The main function holds a call to above. The whole thing is compiled
and run on the command line completely as one would expect coming
from Java.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>scalac Fib.scala 
<span class="nv">$ </span>scala Fib
55</code></pre></figure>

<p>A little quiz: Guess <em>n</em> such that <script type="math/tex">fib(n) = 55</script> (I have elaborated on this
<a href="/blog/100-days-of-fibonacci-day-4-prolog/">tomorrow</a>).</p>

<p>The code can as usually be found on GIT
<a href="https://github.com/madsbuch/fibonacci/tree/master/scala">here</a></p>

<h1 id="continuation-passing-style">Continuation Passing Style</h1>
<p>Continuation Passing Style is not easy to read, and as such it is not a
good way
to implement functions, unless there is a very good reason. These reasons
can be applications where explicit management of the control flow is
necessary.</p>

<p>Many compilers do an implicit conversion from recursive functions to
functions in CPS. A reason is that all computations are wrapped in a
package (i.e. the <em>continuation</em>) and is put in the heap which reduces
maximum stack size.</p>

<h1 id="conclusion">Conclusion</h1>
<p>Today I looked at 2 new things, Scala and Continuation Passing style.</p>

<p>Scala is a great language for writing functional code that has to
integrate with Java projects, or for writing functional code using
Java libraries.</p>

<p>Continuation passing style is a way of programming which can be enormously
useful. Especially when writing large project where the control flow has
to be explicitly managed.</p>


        </section>
        <footer class="post-footer">
          <section class="share">
            
              
                <a class="icon-twitter" href="http://twitter.com/share?text=100+Days+of+Fibonacci+-+Day+3%2C+Scala&amp;url=http://madsbuch.com/blog/100-days-of-fibonacci-day-3-scala"
                  onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
                <i class="fa fa-twitter"></i><span class="hidden">twitter</span>
                </a>
              
            
              
            
          </section>
        </footer>
        <div class="bottom-teaser cf">
          <div class="isLeft">
            <h5 class="index-headline featured"><span>Written by</span></h5>
            <section class="author">
              <div class="author-image" style="background-image: url(/blog/assets/images/author.png)">Blog Logo</div>
              <h4>Mads Buch</h4>
              <p class="bio"></p>
              <hr>
              <p class="published">Published <time datetime="2015-12-18 00:00">18 Dec 2015</time></p>
            </section>
          </div>
          
          <div class="isRight">
            <h5 class="index-headline featured"><span>Supported by</span></h5>
            <footer class="site-footer">
              <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a></section>
              <a class="subscribe" href="/blog/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
              <div class="inner">
                <section class="copyright">All content copyright <a href="/">Mads Buch</a> &copy; 2019<br>All rights reserved.</section>
              </div>
            </footer>
          </div>
        </div>
        
      </article>
    </main>
    <div class="bottom-closer">
      <div class="background-closer-image"  style="background-image: url(/blog/assets/images/cover.jpg)">
        Image
      </div>
      <div class="inner">
        <h1 class="blog-title">Mads Buch</h1>
        <h2 class="blog-description">Technical articles
</h2>
        <a href="/blog" class="btn">Back to Overview</a>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/blog/assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/blog/assets/js/index.js"></script>
<script type="text/javascript" src="/blog/assets/js/readingTime.min.js"></script>
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    
      $window.on('scroll', function() {
        var top = $window.scrollTop();

        if (top < 0 || top > 1500) { return; }
        $image
          .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
          .css('opacity', 1-Math.max(top/700, 0));
      });
      $window.trigger('scroll');

      var height = $('.article-image').height();
      $('.post-content').css('padding-top', height + 'px');

      $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
         && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
          if (target.length) {
            $('html,body').animate({ scrollTop: target.offset().top }, 500);
            return false;
          }
        }
      });

  });
}(jQuery));
</script>


  </body>
</html>
